<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jbosscmp-jdbc PUBLIC
	"-//JBoss//DTD JBOSSCMP-JDBC 3.0//EN"
	"http://www.jboss.org/j2ee/dtd/jbosscmp-jdbc_3_0.dtd">

<jbosscmp-jdbc>

	<defaults>
  		<datasource>java:/jdbc/ManchesterDS_Postgre</datasource> 
  		<datasource-mapping>PostgreSQL</datasource-mapping> 
  		<create-table>false</create-table> 
  		<remove-table>false</remove-table> 
  		<pk-constraint>true</pk-constraint>
		<fk-constraint>true</fk-constraint>  		
  		<preferred-relation-mapping>foreign-key</preferred-relation-mapping>
	</defaults>

	<enterprise-beans>
		<entity>
			<ejb-name>Access</ejb-name>
			<table-name>ACCESS1</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Access o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>2</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>Difficulty</ejb-name>
			<table-name>DIFFICULTY</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Difficulty o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>5</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>Locale</ejb-name>
			<table-name>LOCALE</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>loc</field-name> 
					<column-name>LOC</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Locale o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>3</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>Priority</ejb-name>
			<table-name>PRIORITY</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Priority o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>3</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>Project</ejb-name>
			<table-name>PROJECT</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Project o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>3</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>ProjectAccess</ejb-name>
			<table-name>PROJECTACCESS</table-name>
				<cmp-field>
					<field-name>projectId</field-name> 
					<column-name>PROJECTID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>userId</field-name> 
					<column-name>USERID</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from ProjectAccess o ORDER BY o.projectId, o.userId</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>10</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>			
		</entity>
		<entity>
			<ejb-name>Task</ejb-name>
			<table-name>TASK</table-name>
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>title</field-name> 
					<column-name>TITLE</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>summary</field-name> 
					<column-name>SUMMARY</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>plannedDate</field-name> 
					<column-name>PLANNEDDATE</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>createDate</field-name> 
					<column-name>CREATEDATE</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>comment</field-name> 
					<column-name>COMMENT1</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>progress</field-name> 
					<column-name>PROGRESS</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from Task o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>100</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>
			<query>
				<description></description>
				<query-method>
					<method-name>findByWho</method-name>
					<method-params>
						<method-param>java.lang.Integer</method-param>
					</method-params>
				</query-method>
				<jboss-ql>SELECT OBJECT(a) FROM Task a WHERE a.who.id=?1 ORDER BY a.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>100</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>TaskStatus</ejb-name>
			<table-name>TASKSTATUS</table-name>
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from TaskStatus o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>3</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>
		</entity>
		<entity>
			<ejb-name>TaskType</ejb-name>
			<table-name>TASKTYPE</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from TaskType o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>5</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
		</entity>
		<entity>
			<ejb-name>User</ejb-name>
			<table-name>USER1</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>username</field-name> 
					<column-name>USERNAME</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>password</field-name> 
					<column-name>PASSWORD</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>email</field-name> 
					<column-name>EMAIL</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>lastLogin</field-name> 
					<column-name>LASTLOGIN</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>nofLogins</field-name> 
					<column-name>NOFLOGINS</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from User o ORDER BY o.username</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>10</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>
			<query>
				<description></description>
				<query-method>
					<method-name>findByProject</method-name>
					<method-params>
						<method-param>java.lang.Integer</method-param>
					</method-params>				
				</query-method>
				<jboss-ql>select object(a) from User a, IN (a.projectAccess) b where b.projectId=?1 ORDER BY a.username</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>10</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>				
			<query>
				<description></description>
				<query-method>
					<method-name>findDevelopersByProject</method-name>
					<method-params>
						<method-param>java.lang.Integer</method-param>
					</method-params>				
				</query-method>
				<jboss-ql>select object(a) from User a, IN (a.projectAccess) b where b.projectId=?1 AND b.access.id&gt;1 ORDER BY a.username</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>10</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>									
		</entity>
		<entity>
			<ejb-name>UserType</ejb-name>
			<table-name>USERTYPE</table-name> 
				<cmp-field>
					<field-name>id</field-name> 
					<column-name>ID</column-name> 
				</cmp-field>
				<cmp-field>
					<field-name>desc</field-name> 
					<column-name>DESC1</column-name> 
				</cmp-field>
			<query>
				<description></description>
				<query-method>
					<method-name>findAll</method-name>
					<method-params>
					</method-params>
				</query-method>
				<jboss-ql>select object(o) from UserType o ORDER BY o.id</jboss-ql>
				<read-ahead>
					<strategy>on-load</strategy>
					<page-size>2</page-size>
					<eager-load-group>*</eager-load-group>
				</read-ahead>
			</query>	
		</entity>		
	</enterprise-beans>

	<relationships>
		<ejb-relation>
			<ejb-relation-name>Difficulty-Task</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>difficulty</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>DIFFICULTY_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>TaskType-Task</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>tasktype</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>TASKTYPE_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>TaskStatus-Task</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>taskstatus</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>TASKSTATUS_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>Priority-Task</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>priority</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>PRIORITY_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>Locale-User</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>locale</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>LOCALE_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>UserType-User</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>usertype</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>USERTYPE_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>User-Task1</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>WHO_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>User-Task2</ejb-relation-name> 
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name> 
				<key-fields /> 
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name> 
				<key-fields>
					<key-field>
						<field-name>id</field-name> 
						<column-name>CREATEDBY_ID</column-name> 
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>		
		<ejb-relation>
			<ejb-relation-name>Project-Task</ejb-relation-name>
			<foreign-key-mapping /> 
			<ejb-relationship-role>
				<ejb-relationship-role-name>project</ejb-relationship-role-name>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>task</ejb-relationship-role-name>
				<key-fields>
					<key-field>				
						<field-name>id</field-name>
						<column-name>PROJECT_ID</column-name>
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>ProjectAccess-Project</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>project</ejb-relationship-role-name>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>projectaccess</ejb-relationship-role-name>
				<key-fields>
					<key-field>				
						<field-name>id</field-name>
						<column-name>PROJECTID</column-name>
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>ProjectAccess-User</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>projectaccess</ejb-relationship-role-name>
				<key-fields>
					<key-field>				
						<field-name>id</field-name>
						<column-name>USERID</column-name>
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>User-Project</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>project</ejb-relationship-role-name>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>user</ejb-relationship-role-name>
				<key-fields>
					<key-field>				
						<field-name>id</field-name>
						<column-name>LASTPROJECT_ID</column-name>
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>
		<ejb-relation>
			<ejb-relation-name>Access-ProjectAccess</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>access</ejb-relationship-role-name>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>projectaccess</ejb-relationship-role-name>
				<key-fields>
					<key-field>				
						<field-name>id</field-name>
						<column-name>ACCESS_ID</column-name>
					</key-field>
				</key-fields>
			</ejb-relationship-role>
		</ejb-relation>						
	</relationships>	
</jbosscmp-jdbc>
